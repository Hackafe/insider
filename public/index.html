<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Hackafe Insider</title>
    <meta name="description" content="Hackafe Insider portal">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="apple-touch-icon" href="apple-touch-icon.png">-->

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw=="
          crossorigin="anonymous">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script>window.html5 || document.write('<script src="js/vendor/html5shiv.js"><\/script>')</script>
    <![endif]-->
</head>
<body ng-app="app" ng-controller="MainController as app">
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->

<div class="jumbotron">
    <div class="container">
        <img width="300" height="80" title="" alt=""
             src="data:image/png;base64,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"/>

        <h2>Plovdiv's hackerspace</h2>

        <p>
            Hackafe is a community-driven place,
            where people share their interest in
            <desc
                title="attempt to repair or improve something in a casual or desultory way, often to no useful effect">
                tinkering
            </desc>
            with technology, meet and work on their projects, and learn from each other.
        </p>

        <p style="display:none">Hackafe е клуб/общност на хора, занимаващи се с високи технологии - програмиране,
            хардуер, графичен дизайн,
            онлайн бизнес. Тук се провеждат различни събития, като семинари, работилници, лекции, обучения, човъркане на
            електронни устройства, или просто писане на код за забавление или упражнение.</p>

        <p style="display:none">Hackafe е и споделено работно пространство, където всеки член на общността може да
            изпозлва достъп до интернет,
            стол и бюро, за да свърши своята работа.</p>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-4">
            <h2>Events</h2>
            <card-list cards="labels.events.cards"></card-list>
        </div>
        <div class="col-md-4">
            <h2>Courses</h2>
            <card-list cards="labels.courses.cards"></card-list>
        </div>
        <div class="col-md-4">
            <h2>Gatherings</h2>
            <card-list cards="labels.gatherings.cards"></card-list>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://api.trello.com/1/client.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.8/angular.min.js"></script>
<script>
    (function () {
        angular.module('app', [])
            .run(function () {
                document.styleSheets[0].disabled = true;
            })
            .filter('fromNow', function () {
                return function (date) {
                    return date ? moment(date).fromNow() : date;
                }
            })
            .controller('MainController', function ($scope, $timeout) {
                Trello.get('/boards/GHda069L/cards/open', function (cards) {
                    $timeout(function () {
                        var labels = {};
                        cards.forEach(function (card) {
                            if (new Date(card.due).getTime() < Date.now()) return;
                            card.labels.forEach(function (label) {
                                labels[label.id] = labels[label.id] || label;
                                labels[label.id].cards = labels[label.id].cards || [];
                                labels[label.id].cards.push(card);
                            });
                        });
                        $scope.labels = {
                            // IT events
                            events: {name: "Events", cards: labels['54648a0274d650d567a72353'].cards},
                            // IT courses
                            courses: {name: "Courses", cards: labels['54648a0274d650d567a72355'].cards},
                            // IT gatherings
                            gatherings: {name: "Gatherings", cards: labels['565af8f0fb396fe706bec112'].cards},
                        }
                    });
                }, function (error) {
                    console.error(error);
                });
            })
            .directive('cardList', function () {
                return {
                    limit: 'AE',
                    scope: {
                        cards: "="
                    },
                    controller: function ($scope, $timeout) {
                        $scope.cardOrder = function (card) {
                            return new Date(card.due).getTime();
                        };
                        $scope.coverImage = function (card) {
                            card.coverImage = card.coverImage || {};
                            if (!card.idAttachmentCover) return card.coverImage;
                            if (card.coverImage.promise) return card.coverImage;
                            card.coverImage.promise = Trello.get('/cards/' + card.id + "/attachments/" + card.idAttachmentCover, function (attachment) {
                                $timeout(function () {
                                    card.coverImage.url = attachment.url;
                                });
                            }, function (error) {
                                console.error(error);
                            });
                            return card.coverImage;
                        };
                        $scope.getFb = function (card) {
                            card.fb = card.fb || {};
                            if (card.fb.processed) return card.fb;
                            card.fb.match = card.desc ? card.desc.match(/((https?:)?\/\/(www.)?facebook.com\/events\/\d+)/i) : null;
                            if (card.fb.match)
                                card.fb.url = card.fb.match[0];
                            card.fb.processed = true;
                            return card.fb;
                        };
                    },
                    templateUrl: "eventList"
                }
            })
        ;
    })();
</script>
<script type="text/ng-template" id="eventList">
    <ul class="list-unstyled">
        <li ng-repeat="card in cards | orderBy:cardOrder | limitTo: 3"
            title="{{card.desc}}"
            class="thumbnail">
            <img ng-src="{{coverImage(card).url}}">

            <div class="caption">
                <h3>{{card.name}}</h3>
                <h5>{{card.due | fromNow}}</h5>

                <p><a ng-if="getFb(card).url" href="{{getFb(card).url}}" target="_blank" class="btn btn-primary"
                      role="button">FB</a>
                </p>
            </div>
        </li>
    </ul>
</script>
</body>
</html>
